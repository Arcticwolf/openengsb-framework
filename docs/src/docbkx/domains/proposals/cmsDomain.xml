<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--

    Copyright 2010 OpenEngSB Division, Vienna University of Technology

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<chapter id="cmsDomain" xmlns="http://docbook.org/ns/docbook">
  <title id="cmsDomain.title">CMS Domain</title>
  
  <warning>
    <para>
      This page is only a proposal! This means that everyone is allowed to edit this page and it is 
      marked for change. This proposal could be seen as design idea and should be discussed in public
      and visible for everyone before implemented at all.
    </para>
  </warning>

  <para>
    The comparison is done on the basis of two content management systems. DaisyCMS (<ulink url="http://daisycms.org" />) and 
    Alfresco (<ulink url="http://alfresco.com" />). Alfresco also can be seen as a representativ of CMSs that implement the 
    Java Content Repository specification (JSR 170), such as MagnoliaCMS and HippoCMS, whereas the latter two 
    are using Apache JackRabbit, the open source implementation of JSR 170. Alfresco seems to walk a different 
    way in trying to implement the specification on its own.
  </para>

  <section>
    <title>Comparison</title>

    <informaltable>
      <thead>
        <tr>
          <td>Feature</td>
          <td>Alfresco/JCR</td>
          <td>DaisyCMS</td>
          <td>Comments</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Create document</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Delete document</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Change document</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Change document type</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Document linking</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Add to a collection</td>
          <td>not available</td>
          <td>available</td>
          <td>Alfresco is working in terms of a workspace, which seems to be a little different of what Daisy understands under a collection.</td>
        </tr>
        <tr>
          <td>Query management</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Content type definition</td>
          <td>Per configuration</td>
          <td>programmatically</td>
          <td></td>
        </tr>
        <tr>
          <td>Versioning</td>
          <td>available</td>
          <td>available</td>
          <td></td>
        </tr>
        <tr>
          <td>Support for namespaces</td>
          <td>available</td>
          <td>available</td>
          <td>Same meaning as in XML. Namespaces should avoid name/id collision with documents from other repositories</td>
        </tr>
      </tbody>
    </informaltable>
  </section>



  <section>
    <title>Interface</title>

    <section>
      <title>Interface Repository</title>

      <programlisting><![CDATA[/**
 * creates a new document
 * @param name Name of the document, which does not have to be unique in the repository
 * @param documentTypeId Id, of which type of document has to be created
 * @return The newly created document
 */
 
  public Document createDocument (String name, long documentTypeId);

/**
 * Deletes the given document
 * @param documentId The id of the document to be deleted
 * @throws RepositoryException Thrown if the id can not be found
 */
  public void deleteDocument(long documentId) throws RepositoryException;

/**
 * Creates a new version of the given document 
 * @param documentId
 * @param copyContent True, if the content of the document should be copied to the returned element. 
 * @return the new element
 * @throws RepositoryException if the document can not be found
 */
  public Document createVersion(long documentId, boolean copyContent) throws RepositoryException;

/**
 * Deletes a version of a document
 * @param documentId document to be deleted
 * @param versionId version to be deleted
 * @throws RepositoryException Thrown, if the document/version can't be found
 */
  public void deleteVersion(long documentId, long versionId) throws RepositoryException;

/**
 * Gets a document from the repository
 * @param documentId 
 * @param versionId
 * @return
 * @throws RepositoryException Thrown, if the document/version can't be found.
 */
  public Document getDocument(long documentId, long versionId) throws RepositoryException;
]]></programlisting> 
</section>
 
 <section>
   <title>Interface Document</title>
  
   <programlisting><![CDATA[/**
 * Changes the type of a document. This is a version-level property.
 * @param documentId
 * @param versionId
 * @param docTypeId
 * @throws RepositoryException
 */
  public void changeDocumentType(long documentId, long versionId, long docTypeId) throws RepositoryException;
  
/**
 * 
 * @param documentId
 * @param versionId
 * @throws RepositoryException
 */
  public void addLink (long documentId, long versionId) throws RepositoryException;
  ]]></programlisting>
  </section>
  </section>
</chapter>
