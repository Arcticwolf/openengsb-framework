<?xml version="1.0" encoding="UTF-8"?> 
<process xmlns="http://drools.org/drools-5.0/process"
         xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
         xs:schemaLocation="http://drools.org/drools-5.0/process drools-processes-5.0.xsd"
         type="RuleFlow" name="ci" id="ci" package-name="org.openengsb" >

  <header>
  </header>

  <nodes>
    <start id="1" name="Start" x="75" y="16" width="80" height="40" />
    <actionNode id="5" name="deploy" x="110" y="309" width="80" height="40" >
        <action type="expression" dialect="java" >MavenResult deployResult = deploy.deployProject();</action>
    </actionNode>
    <end id="6" name="End" x="102" y="369" width="80" height="40" />
    <split id="7" name="checkout" x="70" y="88" width="90" height="40" type="2" >
      <constraints>
        <constraint toNodeId="8" toType="DROOLS_DEFAULT" name="otherwise" priority="2" type="rule" dialect="mvel" >eval(true)</constraint>
        <constraint toNodeId="11" toType="DROOLS_DEFAULT" name="scm checkout worked" priority="1" type="code" dialect="java" >MergeResult mr = scm.checkout("testAuthor");
return mr.hasConflicts();</constraint>
      </constraints>
    </split>
    <end id="8" name="End" x="1" y="162" width="80" height="40" />
    <end id="9" name="End" x="46" y="234" width="80" height="40" />
    <end id="10" name="End" x="329" y="339" width="80" height="40" />
    <split id="11" name="test" x="139" y="159" width="93" height="40" type="2" >
      <constraints>
        <constraint toNodeId="9" toType="DROOLS_DEFAULT" name="otherwise" priority="2" type="rule" dialect="mvel" >eval(true)</constraint>
        <constraint toNodeId="12" toType="DROOLS_DEFAULT" name="test worked" priority="1" type="code" dialect="java" >MavenResult testResult = test.runTests();
return testResult.isSuccess();</constraint>
      </constraints>
    </split>
    <split id="12" name="build" x="183" y="232" width="104" height="40" type="2" >
      <constraints>
        <constraint toNodeId="10" toType="DROOLS_DEFAULT" name="otherwise" priority="2" type="rule" dialect="mvel" >eval(true)</constraint>
        <constraint toNodeId="5" toType="DROOLS_DEFAULT" name="build worked" priority="1" type="code" dialect="java" >MavenResult res = build.buildProject();
return res.isSuccess();</constraint>
      </constraints>
    </split>
  </nodes>

  <connections>
    <connection from="12" to="5" />
    <connection from="5" to="6" />
    <connection from="1" to="7" />
    <connection from="7" to="8" />
    <connection from="11" to="9" />
    <connection from="12" to="10" />
    <connection from="7" to="11" />
    <connection from="11" to="12" />
  </connections>

</process>